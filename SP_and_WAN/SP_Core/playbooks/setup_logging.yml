---
- name: Fix Router Logging Visibility
  hosts: routers
  gather_facts: no

  tasks:
    - name: Enable internal buffer and timestamping
      cisco.ios.ios_config:
        lines:
          - logging buffered 16384          # This fixes the empty 'sh log'
          - logging trap debugging         # Sends detailed logs to Ubuntu
          - service timestamps log datetime msec
        save_when: changed

    - name: Ensure logs don't interrupt typing
      cisco.ios.ios_config:
        lines:
          - logging synchronous
        parents: line vty 0 4
